(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4053],{425:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(5155),r=s(2115),l=s(4477);let n=(0,l.createServerReference)("6045676cfceba2b1420b844a6ba4f1bc14520f1481",l.callServer,void 0,l.findSourceMapURL,"getWeeklyPlans"),i=(0,l.createServerReference)("60dc1563dbea04efc708d87c4494f2322e9542179a",l.callServer,void 0,l.findSourceMapURL,"getClients"),c=(0,l.createServerReference)("40cb788177077bd3031f2bc8b87211a31b479e46e9",l.callServer,void 0,l.findSourceMapURL,"createWeeklyPlan"),d=(0,l.createServerReference)("60978467a49470e547ccf89447daba9545619e4dfa",l.callServer,void 0,l.findSourceMapURL,"updateWeeklyPlan");var o=s(6874),m=s.n(o);function x(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[o,x]=(0,r.useState)(!0),[u,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{j()},[]);let j=async()=>{try{let[e,s]=await Promise.all([n(),i()]);e.ok&&t(e.data.data||[]),s.ok&&l(s.data.data||[])}catch(e){}finally{x(!1)}},b=async e=>{h(!0),y(null);try{let t=await c(e);t.ok?(y({type:"success",text:"Weekly plan created successfully!"}),g(!1),await j()):y({type:"error",text:t.error})}catch(e){y({type:"error",text:"An unexpected error occurred"})}finally{h(!1)}},v=async(s,a)=>{try{let l=e.map(e=>{if(e.id===s){var t;let s=[...null!=(t=e.tasks)?t:[]],r=s[a];return r&&(s[a]={...r,completed:!r.completed}),{...e,tasks:s}}return e});t(l);let n=e.find(e=>e.id===s);if(n){var r;let e=[...null!=(r=n.tasks)?r:[]],t=e[a];t&&(e[a]={...t,completed:!t.completed}),await d(s,{tasks:e})}}catch(e){}};return o?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[(0,a.jsx)("nav",{className:"border-b border-gray-100 bg-white/80 backdrop-blur-md sticky top-0 z-50",children:(0,a.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,a.jsx)("span",{className:"text-xl font-semibold text-gray-900",children:"Weekly Plans"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(m(),{href:"/",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Home"}),(0,a.jsx)(m(),{href:"/sessions",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Sessions"}),(0,a.jsx)(m(),{href:"/trainer-profile",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Profile"})]})]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-6 py-12",children:[(0,a.jsxs)("div",{className:"text-center mb-16 animate-fade-in-up",children:[(0,a.jsx)("h1",{className:"text-display font-bold text-gray-900 mb-4",children:"Manage Weekly Plans"}),(0,a.jsx)("p",{className:"text-body text-gray-600 max-w-2xl mx-auto",children:"Create personalized weekly plans for your clients with specific goals and actionable tasks."})]}),f&&(0,a.jsx)("div",{className:"mb-8 p-4 rounded-xl ".concat("success"===f.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:f.text}),(0,a.jsx)("div",{className:"text-center mb-12",children:(0,a.jsxs)("button",{onClick:()=>g(!p),className:"btn flex items-center gap-2 mx-auto",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),p?"Cancel":"Create New Plan"]})}),p&&(0,a.jsx)("div",{className:"mb-12 animate-fade-in-up",children:(0,a.jsxs)("div",{className:"card card-hover p-8",children:[(0,a.jsx)("h2",{className:"text-headline font-semibold text-gray-900 mb-6",children:"Create Weekly Plan"}),(0,a.jsxs)("form",{action:b,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"client_id",className:"text-sm font-medium text-gray-700",children:"Client *"}),(0,a.jsxs)("select",{id:"client_id",name:"client_id",className:"input w-full focus-ring",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select a client"}),s.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"title",className:"text-sm font-medium text-gray-700",children:"Plan Title *"}),(0,a.jsx)("input",{id:"title",name:"title",type:"text",placeholder:"e.g., Week 1: Foundation Building",className:"input w-full focus-ring",required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"week_start_date",className:"text-sm font-medium text-gray-700",children:"Week Start Date *"}),(0,a.jsx)("input",{id:"week_start_date",name:"week_start_date",type:"date",className:"input w-full focus-ring",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"week_end_date",className:"text-sm font-medium text-gray-700",children:"Week End Date *"}),(0,a.jsx)("input",{id:"week_end_date",name:"week_end_date",type:"date",className:"input w-full focus-ring",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"description",className:"text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",placeholder:"Brief description of this week's focus...",rows:3,className:"input w-full focus-ring"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"goals",className:"text-sm font-medium text-gray-700",children:"Weekly Goals *"}),(0,a.jsx)("textarea",{id:"goals",name:"goals",placeholder:"Enter goals separated by commas (e.g., Build strength, Improve form, Increase endurance)",rows:2,className:"input w-full focus-ring",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sample Tasks (you can edit these after creation)"}),(0,a.jsx)("div",{className:"space-y-3",children:["Morning workout","Nutrition tracking","Evening stretching"].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{name:"task_".concat(t),type:"text",defaultValue:e,className:"input flex-1 focus-ring",required:!0}),(0,a.jsxs)("select",{name:"task_category_".concat(t),className:"input focus-ring",defaultValue:"workout",children:[(0,a.jsx)("option",{value:"workout",children:"Workout"}),(0,a.jsx)("option",{value:"nutrition",children:"Nutrition"}),(0,a.jsx)("option",{value:"mindfulness",children:"Mindfulness"}),(0,a.jsx)("option",{value:"other",children:"Other"})]}),(0,a.jsxs)("select",{name:"task_frequency_".concat(t),className:"input focus-ring",defaultValue:"daily",children:[(0,a.jsx)("option",{value:"daily",children:"Daily"}),(0,a.jsx)("option",{value:"weekly",children:"Weekly"}),(0,a.jsx)("option",{value:"custom",children:"Custom"})]})]},t))})]}),(0,a.jsx)("div",{className:"pt-6 border-t border-gray-200",children:(0,a.jsx)("button",{type:"submit",disabled:u,className:"btn w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Plan..."]}):(0,a.jsxs)(a.Fragment,{children:["Create Weekly Plan",(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})})})]})]})}),(0,a.jsx)("div",{className:"space-y-8",children:e.length>0?e.map(e=>{var t;return(0,a.jsxs)("div",{className:"card card-hover p-8 animate-fade-in-up",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-headline font-semibold text-gray-900 mb-2",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:[e.week_start_date?new Date(e.week_start_date).toLocaleDateString():"No start date"," - ",e.week_end_date?new Date(e.week_end_date).toLocaleDateString():"No end date"]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"completed"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status})]})]})}),e.description&&(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:e.description}),e.goals&&e.goals.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Goals"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.goals.map((e,t)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:e.title},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Tasks"}),(0,a.jsx)("div",{className:"space-y-3",children:null==(t=e.tasks)?void 0:t.map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.completed,onChange:()=>v(e.id,s),className:"w-5 h-5 text-blue-600 bg-white border-2 border-gray-300 rounded-lg focus:ring-blue-500 focus:ring-2 transition-colors"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium ".concat(t.completed?"line-through text-gray-500":"text-gray-900"),children:t.title}),t.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:t.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("workout"===t.category?"bg-red-100 text-red-800":"nutrition"===t.category?"bg-green-100 text-green-800":"mindfulness"===t.category?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:t.category}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:t.frequency})]})]},t.id))})]})]},e.id)}):(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No weekly plans yet"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Create your first weekly plan to get started."})]})})]})]})}},4477:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{callServer:function(){return a.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return r.findSourceMapURL}});let a=s(3806),r=s(1818),l=s(7197)},9604:(e,t,s)=>{Promise.resolve().then(s.bind(s,425))}},e=>{e.O(0,[6874,8441,5964,7358],()=>e(e.s=9604)),_N_E=e.O()}]);