# HT-023.1.4 Layout Pattern Library

## Overview

Comprehensive layout pattern library for common custom micro-app use cases and client requirements. Built to work seamlessly with the Template Engine Architecture (HT-023.1.1), Responsive Design System (HT-023.1.2), and Custom Micro-App Template Structure (HT-023.1.3).

## Core Layout Pattern Categories

### 1. Landing Page Patterns

**Hero-Centric Patterns:**
```typescript
// lib/template-engine/patterns/landing.ts
interface LandingPattern {
  id: string;
  name: string;
  useCase: string[];
  structure: PatternStructure;
  responsive: ResponsiveBehavior;
  customization: CustomizationScope[];
}

const HeroFormPattern: LandingPattern = {
  id: 'hero-form-split',
  name: 'Hero with Side Form',
  useCase: ['lead-generation', 'consultation-booking', 'newsletter-signup'],
  structure: {
    sections: ['hero-content', 'form-sidebar'],
    layout: 'two-column',
    ratio: '60:40',
    alignment: 'center'
  },
  responsive: {
    mobile: 'stacked-form-first',
    tablet: 'stacked-hero-first',
    desktop: 'side-by-side'
  },
  customization: ['hero-content', 'form-fields', 'cta-styling', 'background']
};

const HeroOverlayPattern: LandingPattern = {
  id: 'hero-overlay-form',
  name: 'Hero Background with Form Overlay',
  useCase: ['high-impact-landing', 'product-launch', 'event-registration'],
  structure: {
    sections: ['background-hero', 'overlay-form'],
    layout: 'layered',
    positioning: 'center-right',
    backdrop: 'gradient-overlay'
  },
  responsive: {
    mobile: 'full-width-form',
    tablet: 'centered-form',
    desktop: 'positioned-overlay'
  },
  customization: ['background-media', 'overlay-opacity', 'form-position', 'gradient']
};
```

**Content-First Patterns:**
```typescript
const FeatureGridPattern: LandingPattern = {
  id: 'feature-grid-cta',
  name: 'Feature Grid with Call-to-Action',
  useCase: ['service-showcase', 'product-features', 'capability-overview'],
  structure: {
    sections: ['hero-header', 'feature-grid', 'cta-section'],
    layout: 'vertical-flow',
    grid: '3-column-desktop',
    spacing: 'comfortable'
  },
  responsive: {
    mobile: '1-column',
    tablet: '2-column',
    desktop: '3-column'
  },
  customization: ['feature-count', 'grid-layout', 'icon-style', 'cta-placement']
};
```

### 2. Form Patterns

**Multi-Step Questionnaire Patterns:**
```typescript
// lib/template-engine/patterns/forms.ts
const ProgressiveQuestionnairePattern = {
  id: 'progressive-questionnaire',
  name: 'Progressive Multi-Step Questionnaire',
  useCase: ['lead-qualification', 'needs-assessment', 'intake-forms'],
  structure: {
    sections: ['progress-indicator', 'question-area', 'navigation-controls'],
    layout: 'centered-flow',
    navigation: 'bottom-fixed',
    progress: 'top-bar'
  },
  responsive: {
    mobile: 'full-screen-questions',
    tablet: 'centered-60-width',
    desktop: 'centered-50-width'
  },
  customization: ['progress-style', 'question-layout', 'navigation-labels', 'validation']
};

const ConversationalFormPattern = {
  id: 'conversational-form',
  name: 'Chat-Style Conversational Form',
  useCase: ['friendly-intake', 'consultation-booking', 'customer-surveys'],
  structure: {
    sections: ['chat-container', 'message-flow', 'input-area'],
    layout: 'chat-interface',
    animation: 'message-typing',
    flow: 'sequential-reveal'
  },
  responsive: {
    mobile: 'mobile-chat-optimized',
    tablet: 'chat-with-sidebar',
    desktop: 'centered-chat-width'
  },
  customization: ['avatar-style', 'message-timing', 'input-types', 'personality']
};
```

**Contact Form Patterns:**
```typescript
const InlineContactPattern = {
  id: 'inline-contact-form',
  name: 'Inline Contact Form',
  useCase: ['quick-inquiries', 'contact-pages', 'service-requests'],
  structure: {
    sections: ['form-header', 'field-groups', 'submission-area'],
    layout: 'single-column',
    grouping: 'logical-sections',
    validation: 'real-time'
  },
  responsive: {
    mobile: 'stacked-fields',
    tablet: 'two-column-layout',
    desktop: 'optimized-column-layout'
  },
  customization: ['field-configuration', 'validation-rules', 'success-actions', 'styling']
};
```

### 3. Dashboard Patterns

**Analytics Dashboard Patterns:**
```typescript
// lib/template-engine/patterns/dashboards.ts
const MetricsDashboardPattern = {
  id: 'metrics-dashboard',
  name: 'Key Metrics Dashboard',
  useCase: ['business-analytics', 'performance-monitoring', 'kpi-tracking'],
  structure: {
    sections: ['header-nav', 'metrics-grid', 'charts-area', 'data-tables'],
    layout: 'grid-based',
    hierarchy: 'metrics-first',
    navigation: 'sidebar-primary'
  },
  responsive: {
    mobile: 'stacked-cards',
    tablet: 'two-column-grid',
    desktop: 'full-grid-layout'
  },
  customization: ['metric-selection', 'chart-types', 'color-schemes', 'data-sources']
};

const AdminPortalPattern = {
  id: 'admin-portal',
  name: 'Administrative Portal',
  useCase: ['content-management', 'user-administration', 'system-configuration'],
  structure: {
    sections: ['navigation-sidebar', 'content-area', 'action-toolbar'],
    layout: 'sidebar-main',
    navigation: 'hierarchical-menu',
    actions: 'contextual-toolbar'
  },
  responsive: {
    mobile: 'hamburger-navigation',
    tablet: 'collapsible-sidebar',
    desktop: 'full-sidebar-layout'
  },
  customization: ['navigation-structure', 'permission-levels', 'action-sets', 'branding']
};
```

### 4. E-commerce Patterns

**Product Showcase Patterns:**
```typescript
// lib/template-engine/patterns/ecommerce.ts
const ProductGridPattern = {
  id: 'product-grid-showcase',
  name: 'Product Grid Showcase',
  useCase: ['product-catalogs', 'service-listings', 'portfolio-displays'],
  structure: {
    sections: ['filter-bar', 'product-grid', 'pagination-controls'],
    layout: 'grid-with-filters',
    filtering: 'sidebar-or-top',
    pagination: 'load-more-or-pages'
  },
  responsive: {
    mobile: '1-column-with-filters',
    tablet: '2-column-grid',
    desktop: '3-4-column-grid'
  },
  customization: ['grid-density', 'filter-options', 'product-card-style', 'pagination-type']
};

const ProductDetailPattern = {
  id: 'product-detail-inquiry',
  name: 'Product Detail with Inquiry',
  useCase: ['service-details', 'product-information', 'consultation-booking'],
  structure: {
    sections: ['product-gallery', 'product-info', 'inquiry-form', 'related-items'],
    layout: 'two-column-detail',
    gallery: 'primary-with-thumbnails',
    inquiry: 'sticky-sidebar'
  },
  responsive: {
    mobile: 'stacked-sections',
    tablet: 'modified-two-column',
    desktop: 'full-detail-layout'
  },
  customization: ['gallery-style', 'info-sections', 'inquiry-fields', 'related-algorithm']
};
```

### 5. Content Patterns

**Blog/Article Patterns:**
```typescript
// lib/template-engine/patterns/content.ts
const ArticleLayoutPattern = {
  id: 'article-with-sidebar',
  name: 'Article with Sidebar',
  useCase: ['blog-posts', 'documentation', 'knowledge-base'],
  structure: {
    sections: ['article-header', 'content-body', 'sidebar-widgets', 'article-footer'],
    layout: 'article-sidebar',
    typography: 'readable-optimized',
    sidebar: 'related-content'
  },
  responsive: {
    mobile: 'full-width-article',
    tablet: 'sidebar-below-content',
    desktop: 'sidebar-alongside'
  },
  customization: ['typography-scale', 'sidebar-content', 'header-style', 'sharing-options']
};

const LandingContentPattern = {
  id: 'landing-content-sections',
  name: 'Multi-Section Landing Content',
  useCase: ['service-pages', 'about-pages', 'feature-explanations'],
  structure: {
    sections: ['hero-section', 'content-sections', 'testimonials', 'cta-section'],
    layout: 'sectioned-content',
    flow: 'guided-narrative',
    sections: 'alternating-layout'
  },
  responsive: {
    mobile: 'stacked-sections',
    tablet: 'optimized-sections',
    desktop: 'alternating-sections'
  },
  customization: ['section-count', 'layout-style', 'content-density', 'visual-elements']
};
```

## Client Requirement Patterns

### 1. Industry-Specific Patterns

**Healthcare Patterns:**
```typescript
const HealthcareIntakePattern = {
  id: 'healthcare-intake',
  name: 'HIPAA-Compliant Patient Intake',
  useCase: ['patient-onboarding', 'medical-consultations', 'health-assessments'],
  structure: {
    sections: ['privacy-notice', 'patient-info', 'medical-history', 'consent-forms'],
    layout: 'stepped-compliance',
    security: 'enhanced-validation',
    privacy: 'explicit-consent'
  },
  compliance: ['HIPAA', 'privacy-by-design', 'data-minimization'],
  customization: ['practice-branding', 'specialty-fields', 'consent-language', 'security-level']
};
```

**Beauty/Salon Patterns:**
```typescript
const BeautyConsultationPattern = {
  id: 'beauty-consultation',
  name: 'Beauty Consultation & Booking',
  useCase: ['salon-booking', 'consultation-requests', 'treatment-planning'],
  structure: {
    sections: ['service-selection', 'preference-quiz', 'booking-calendar', 'confirmation'],
    layout: 'guided-booking',
    visual: 'beauty-focused',
    booking: 'calendar-integration'
  },
  customization: ['service-menu', 'branding-style', 'booking-flow', 'pricing-display']
};
```

**Real Estate Patterns:**
```typescript
const PropertyInquiryPattern = {
  id: 'property-inquiry',
  name: 'Property Inquiry & Qualification',
  useCase: ['buyer-qualification', 'property-inquiries', 'market-analysis'],
  structure: {
    sections: ['property-search', 'buyer-profile', 'financing-info', 'agent-matching'],
    layout: 'property-focused',
    search: 'map-integration',
    qualification: 'progressive-disclosure'
  },
  customization: ['market-area', 'property-types', 'agent-profiles', 'search-criteria']
};
```

### 2. Functional Requirement Patterns

**Lead Generation Patterns:**
```typescript
const LeadMagnetPattern = {
  id: 'lead-magnet-download',
  name: 'Lead Magnet with Content Gate',
  useCase: ['ebook-downloads', 'resource-access', 'newsletter-signup'],
  structure: {
    sections: ['value-proposition', 'preview-content', 'signup-form', 'instant-delivery'],
    layout: 'value-first',
    conversion: 'optimized-flow',
    delivery: 'immediate-access'
  },
  customization: ['content-preview', 'form-complexity', 'delivery-method', 'follow-up-sequence']
};

const WebinarRegistrationPattern = {
  id: 'webinar-registration',
  name: 'Webinar Registration & Reminder System',
  useCase: ['event-registration', 'webinar-signup', 'course-enrollment'],
  structure: {
    sections: ['event-details', 'speaker-info', 'registration-form', 'calendar-integration'],
    layout: 'event-focused',
    social: 'sharing-integration',
    automation: 'reminder-system'
  },
  customization: ['event-branding', 'speaker-profiles', 'registration-fields', 'reminder-sequence']
};
```

## Pattern Composition Rules

### 1. Layout Composition Engine

```typescript
// lib/template-engine/patterns/composition.ts
interface PatternCompositionRule {
  id: string;
  pattern: string;
  conditions: CompositionCondition[];
  modifications: PatternModification[];
  priority: number;
}

const CompositionRules: PatternCompositionRule[] = [
  {
    id: 'mobile-form-optimization',
    pattern: '*-form-*',
    conditions: [{ type: 'device', value: 'mobile' }],
    modifications: [
      { target: 'form-layout', action: 'stack-fields' },
      { target: 'input-size', action: 'increase-touch-targets' },
      { target: 'validation', action: 'inline-feedback' }
    ],
    priority: 100
  },
  {
    id: 'dashboard-sidebar-collapse',
    pattern: '*-dashboard-*',
    conditions: [{ type: 'screen-width', operator: '<', value: 1024 }],
    modifications: [
      { target: 'sidebar', action: 'collapse-to-overlay' },
      { target: 'main-content', action: 'expand-full-width' },
      { target: 'navigation', action: 'hamburger-menu' }
    ],
    priority: 90
  },
  {
    id: 'high-contrast-accessibility',
    pattern: '*',
    conditions: [{ type: 'user-preference', value: 'high-contrast' }],
    modifications: [
      { target: 'colors', action: 'enhance-contrast' },
      { target: 'borders', action: 'strengthen-outlines' },
      { target: 'focus-indicators', action: 'emphasize-visibility' }
    ],
    priority: 80
  }
];
```

### 2. Pattern Selection Logic

```typescript
// lib/template-engine/patterns/selector.ts
export class PatternSelector {
  selectOptimalPattern(
    useCase: string,
    clientRequirements: ClientRequirements,
    constraints: PatternConstraints
  ): LayoutPattern {
    const candidates = this.getCandidatePatterns(useCase);
    const scored = this.scorePatterns(candidates, clientRequirements);
    const filtered = this.applyConstraints(scored, constraints);

    return this.selectBestMatch(filtered);
  }

  private scorePatterns(
    patterns: LayoutPattern[],
    requirements: ClientRequirements
  ): ScoredPattern[] {
    return patterns.map(pattern => ({
      pattern,
      score: this.calculatePatternScore(pattern, requirements)
    }));
  }

  private calculatePatternScore(
    pattern: LayoutPattern,
    requirements: ClientRequirements
  ): number {
    let score = 0;

    // Use case match
    if (pattern.useCase.includes(requirements.primaryUseCase)) score += 50;

    // Industry alignment
    if (pattern.industry === requirements.industry) score += 30;

    // Feature requirements
    const featureMatch = this.calculateFeatureMatch(pattern.features, requirements.features);
    score += featureMatch * 20;

    // Complexity alignment
    if (pattern.complexity === requirements.complexity) score += 10;

    // Customization flexibility
    const customizationScore = this.calculateCustomizationScore(pattern, requirements);
    score += customizationScore * 10;

    return score;
  }
}
```

## Pattern Documentation System

### 1. Pattern Documentation Structure

```typescript
// lib/template-engine/patterns/documentation.ts
interface PatternDocumentation {
  pattern: LayoutPattern;
  description: PatternDescription;
  examples: PatternExample[];
  implementation: ImplementationGuide;
  customization: CustomizationGuide;
  bestPractices: BestPractice[];
}

interface PatternDescription {
  overview: string;
  whenToUse: string[];
  whenNotToUse: string[];
  userExperience: UXConsiderations;
  technicalRequirements: TechnicalRequirement[];
}

interface PatternExample {
  id: string;
  title: string;
  industry: string;
  screenshot: string;
  liveDemo: string;
  codeExample: CodeSnippet[];
  clientFeedback?: ClientFeedback;
}
```

### 2. Implementation Guidelines

```typescript
const PatternImplementationGuide = {
  heroFormPattern: {
    setup: [
      'Configure hero content section with responsive image/video',
      'Set up form with validation and submission handling',
      'Implement responsive layout switching at defined breakpoints',
      'Add accessibility features for form and hero content'
    ],
    customization: [
      'Replace hero background with client brand imagery',
      'Customize form fields based on client requirements',
      'Apply client color scheme and typography',
      'Configure form submission endpoints and automation'
    ],
    testing: [
      'Test form submission across all devices',
      'Validate responsive layout transitions',
      'Check accessibility compliance (WCAG 2.1 AA)',
      'Performance test with client assets'
    ]
  }
};
```

## Verification Checkpoints Status

✅ **Layout pattern library designed**
- Comprehensive pattern library covering landing pages, forms, dashboards, e-commerce, and content layouts
- Industry-specific patterns for healthcare, beauty, real estate, and general business use cases
- Responsive behavior definitions for mobile, tablet, and desktop contexts

✅ **Common use case patterns defined**
- Lead generation patterns (hero-form, lead magnets, webinar registration)
- Multi-step questionnaire patterns (progressive, conversational)
- Dashboard patterns (metrics, admin portals)
- E-commerce patterns (product grids, detail pages)
- Content patterns (articles, multi-section landing pages)

✅ **Client requirement patterns identified**
- Industry-specific compliance patterns (HIPAA for healthcare)
- Functional requirement patterns (booking, consultation, inquiry)
- Accessibility and user preference accommodations
- Performance and device optimization patterns

✅ **Pattern composition rules established**
- Device-responsive composition modifications
- User preference and accessibility adaptations
- Screen size and constraint-based pattern selection
- Priority-based rule application system

✅ **Pattern documentation planned**
- Structured documentation system with examples and implementation guides
- Best practices and when-to-use guidance
- Code examples and live demo references
- Client feedback integration for continuous improvement

## Integration with Previous Components

### Template Engine Integration
- **Seamless pattern selection**: Patterns integrate with HT-023.1.1 Template Engine for automatic selection
- **Composition engine compatibility**: Full compatibility with template composition rules
- **Version management**: Pattern versioning aligned with template versioning system

### Responsive Design Integration
- **Breakpoint alignment**: All patterns use HT-023.1.2 responsive breakpoint system
- **Mobile-first approach**: Patterns designed with mobile-first responsive principles
- **Touch optimization**: Touch target and interaction optimization built into all patterns

### Template Structure Integration
- **Micro-app category alignment**: Patterns mapped to HT-023.1.3 micro-app categories
- **Customization point integration**: Pattern customization aligns with template customization framework
- **Validation integration**: Pattern validation uses template validation system

This layout pattern library provides the final piece of Phase 1, enabling rapid selection and implementation of appropriate layout patterns for any client use case while maintaining consistency and quality across all micro-app deliveries.